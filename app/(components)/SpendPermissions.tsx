'use client';
import React,{useState}from'react';
type Row={symbol:string;token:string;spender:string;allowance:string;period:string};
export default function SpendPermissions({initial}:{initial:Row[]}){const[rows,setRows]=useState<Row[]>(initial);function addRow(){setRows(r=>[...r,{symbol:'TKN',token:'0x...',spender:'0xSpender',allowance:'0',period:'86400'}]);}function apply(){alert('Simulate setAllowance for '+rows.length+' entries');}function revoke(i:number){alert('Simulate revoke for '+rows[i].token);}return(<div className="card"><div style={{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:8}}><b>Spend Permissions</b><div style={{display:'flex',gap:8}}><button className="btn btn-outline" onClick={()=>alert('Simulated: Permit2 lockdown')}>Revoke Permit2</button><button className="btn" onClick={addRow}>Add from scan</button></div></div><div className="help">Define per-token limits and periods for a spender. Example: “50 USDC per day for 0xyourApp”.</div><div style={{display:'grid',gap:8,marginTop:8}}>{rows.map((r,i)=>(<div key={i} style={{display:'grid',gridTemplateColumns:'100px 1fr 1fr 1fr 1fr 100px',gap:8}}><div style={{alignSelf:'center',fontWeight:600}}>{r.symbol}</div><input defaultValue={r.token} placeholder="Token address (0x…)"/><input defaultValue={r.spender} placeholder="Spender (0x…)"/><input defaultValue={r.allowance} placeholder="Allowance (wei)"/><input defaultValue={r.period} placeholder="Period (seconds)"/><div style={{display:'flex',justifyContent:'end'}}><button className="btn btn-outline" onClick={()=>revoke(i)}>Revoke</button></div></div>))}</div><div className="hint">Tip: start low. You can always raise limits later.</div><div style={{display:'flex',justifyContent:'end',marginTop:12}}><button className="btn" onClick={apply}>Apply</button></div></div>)}